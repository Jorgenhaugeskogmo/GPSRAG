(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4255)}])},4255:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return b}});var r=s(5893),a=s(7294),l=s(8532),i=s(250);let n=e=>{let{className:t="w-6 h-6",size:s=32}=e;return(0,r.jsxs)("svg",{width:s,height:s,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[(0,r.jsx)("rect",{x:"10",y:"12",width:"12",height:"8",rx:"2",fill:"currentColor",stroke:"currentColor",strokeWidth:"1"}),(0,r.jsx)("rect",{x:"4",y:"14",width:"4",height:"4",rx:"0.5",fill:"currentColor",opacity:"0.8"}),(0,r.jsx)("line",{x1:"4.5",y1:"15",x2:"7.5",y2:"15",stroke:"white",strokeWidth:"0.3"}),(0,r.jsx)("line",{x1:"4.5",y1:"16",x2:"7.5",y2:"16",stroke:"white",strokeWidth:"0.3"}),(0,r.jsx)("line",{x1:"4.5",y1:"17",x2:"7.5",y2:"17",stroke:"white",strokeWidth:"0.3"}),(0,r.jsx)("rect",{x:"24",y:"14",width:"4",height:"4",rx:"0.5",fill:"currentColor",opacity:"0.8"}),(0,r.jsx)("line",{x1:"24.5",y1:"15",x2:"27.5",y2:"15",stroke:"white",strokeWidth:"0.3"}),(0,r.jsx)("line",{x1:"24.5",y1:"16",x2:"27.5",y2:"16",stroke:"white",strokeWidth:"0.3"}),(0,r.jsx)("line",{x1:"24.5",y1:"17",x2:"27.5",y2:"17",stroke:"white",strokeWidth:"0.3"}),(0,r.jsx)("circle",{cx:"16",cy:"9",r:"1.5",fill:"currentColor"}),(0,r.jsx)("line",{x1:"16",y1:"9",x2:"16",y2:"12",stroke:"currentColor",strokeWidth:"1"}),(0,r.jsx)("path",{d:"M 8 6 Q 16 2 24 6",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.6"}),(0,r.jsx)("path",{d:"M 6 8 Q 16 3 26 8",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.4"}),(0,r.jsx)("path",{d:"M 4 10 Q 16 4 28 10",stroke:"currentColor",strokeWidth:"1",fill:"none",opacity:"0.2"}),(0,r.jsx)("circle",{cx:"13",cy:"15",r:"0.5",fill:"white",opacity:"0.8"}),(0,r.jsx)("circle",{cx:"19",cy:"17",r:"0.5",fill:"white",opacity:"0.8"}),(0,r.jsx)("rect",{x:"15",y:"14",width:"2",height:"1",rx:"0.2",fill:"white",opacity:"0.6"})]})},o=e=>{let{children:t}=e,[s,o]=a.useState(!1);return a.useEffect(()=>{document.documentElement.classList.toggle("dark",s)},[s]),(0,r.jsxs)("div",{className:"min-h-screen flex flex-col bg-gray-50 dark:bg-gray-900 transition-colors duration-500",children:[(0,r.jsxs)("nav",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-indigo-600 to-blue-500 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-white bg-opacity-20 rounded-lg flex items-center justify-center",children:(0,r.jsx)(n,{className:"w-6 h-6 text-white"})}),(0,r.jsx)("h1",{className:"text-xl font-bold text-white",children:"GPSRAG"})]}),(0,r.jsx)("button",{onClick:()=>o(e=>!e),className:"p-2 rounded-full bg-white bg-opacity-20 hover:bg-opacity-30 transition-all duration-200",children:s?(0,r.jsx)(l.Z,{className:"w-5 h-5 text-yellow-300"}):(0,r.jsx)(i.Z,{className:"w-5 h-5 text-white"})})]}),(0,r.jsx)("main",{className:"flex-1 p-6 overflow-auto bg-gray-50 dark:bg-gray-900",children:t}),(0,r.jsx)("footer",{className:"p-4 text-center text-sm text-gray-500 dark:text-gray-400 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700",children:"\xa9 2025 NLAT og EMT"})]})};var d=s(1113),c=s(7751),x=s(8499),m=s(882),h=s(8885);function u(){let[e,t]=(0,a.useState)([{id:"1",role:"assistant",content:"Hei! Jeg er din AI-assistent for GPS-data og dokumentanalyse. Last opp dine u-blox manualer eller andre dokumenter, s\xe5 kan jeg hjelpe deg med \xe5 finne informasjon og analysere GPS-data.",timestamp:new Date}]),[s,l]=(0,a.useState)(""),[i,n]=(0,a.useState)(!1),[o,u]=(0,a.useState)(!1),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{u(!0)},[]);let g=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})};(0,a.useEffect)(()=>{g()},[e]);let y=async e=>{if(e.preventDefault(),!s.trim()||i)return;let r={id:Date.now().toString(),role:"user",content:s,timestamp:new Date};t(e=>[...e,r]),l(""),n(!0);try{Date.now(),n(!0);let e=await fetch("/api/chat/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:s,session_id:"default-session"})});if(e.ok){let s=await e.json(),r={id:(Date.now()+1).toString(),role:"assistant",content:s.response||"Beklager, jeg kunne ikke prosessere foresp\xf8rselen din.",timestamp:new Date,sources:s.sources||[]};t(e=>[...e,r])}else throw Error("Failed to get response")}catch(s){console.error("Chat error:",s);let e={id:(Date.now()+1).toString(),role:"assistant",content:"Beklager, det oppstod en feil. S\xf8rg for at backend-tjenestene kj\xf8rer og pr\xf8v igjen.",timestamp:new Date};t(t=>[...t,e])}n(!1)},f=e=>o?e.toLocaleTimeString("no-NO",{hour:"2-digit",minute:"2-digit"}):"",j=e=>{l(e)};return(0,r.jsxs)("div",{className:"h-full flex flex-col",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map(e=>(0,r.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,r.jsx)("div",{className:"max-w-3xl px-4 py-3 rounded-lg ".concat("user"===e.role?"bg-primary-600 text-white":"bg-gray-100 text-gray-900"),children:(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:"user"===e.role?(0,r.jsx)(d.Z,{className:"h-5 w-5 mt-0.5"}):(0,r.jsx)(c.Z,{className:"h-5 w-5 mt-0.5"})}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)(h.U,{className:"prose prose-sm max-w-none",children:e.content}),e.sources&&e.sources.length>0&&(0,r.jsxs)("div",{className:"mt-3 border-t pt-3",children:[(0,r.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:"Kilder:"}),(0,r.jsx)("div",{className:"space-y-2",children:e.sources.map((e,t)=>(0,r.jsxs)("div",{className:"bg-white border rounded p-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,r.jsx)(x.Z,{className:"h-4 w-4 text-gray-500"}),(0,r.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.filename}),e.page&&(0,r.jsxs)("span",{className:"text-xs text-gray-500",children:["Side ",e.page]}),(0,r.jsxs)("span",{className:"text-xs text-green-600",children:[Math.round(100*e.relevance_score),"% match"]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-600 italic",children:['"',e.excerpt,'"']})]},t))})]}),(0,r.jsx)("p",{className:"text-xs mt-2 opacity-70",children:f(e.timestamp)})]})]})})},e.id)),i&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)("div",{className:"bg-gray-100 text-gray-900 px-4 py-3 rounded-lg",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)(c.Z,{className:"h-5 w-5 animate-pulse"}),(0,r.jsxs)("div",{className:"flex space-x-1",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,r.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})]})})}),(0,r.jsx)("div",{ref:p})]}),1===e.length&&(0,r.jsxs)("div",{className:"p-4 border-t bg-gray-50",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Eksempelsp\xf8rsm\xe5l:"}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:["Hva er forskjellen mellom GPS og GNSS?","Hvordan konfigurerer jeg u-blox mottakeren for h\xf8y n\xf8yaktighet?","Hvilke NMEA-meldinger st\xf8tter u-blox modulene?","Hva er Cold Start vs Warm Start i GPS?","Hvordan aktiverer jeg RTK-modus p\xe5 u-blox?"].map((e,t)=>(0,r.jsx)("button",{onClick:()=>j(e),className:"text-sm bg-white border border-gray-300 rounded-full px-3 py-1 hover:bg-gray-100 transition-colors",children:e},t))})]}),(0,r.jsx)("form",{onSubmit:y,className:"p-4 border-t bg-white",children:(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsx)("input",{type:"text",value:s,onChange:e=>l(e.target.value),placeholder:"Still et sp\xf8rsm\xe5l om GPS, u-blox eller dine opplastede dokumenter...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",disabled:i})}),(0,r.jsx)("button",{type:"submit",disabled:!s.trim()||i,className:"px-4 py-2 bg-primary-600 text-white rounded-lg hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:(0,r.jsx)(m.Z,{className:"h-5 w-5"})})]})})]})}var p=s(8901),g=s(9927),y=s(1415),f=s(50);function j(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)(!1),i=async e=>{for(let s of(l(!0),e)){let e=Date.now().toString()+Math.random().toString(36).substr(2,9),r={id:e,name:s.name,size:s.size,status:"uploading",progress:0};t(e=>[...e,r]);try{t(t=>t.map(t=>t.id===e?{...t,status:"uploading",progress:25}:t));let r=new FormData;r.append("file",s);let a=await fetch("/api/upload",{method:"POST",body:r});if(t(t=>t.map(t=>t.id===e?{...t,status:"processing",progress:75}:t)),a.ok){let s=await a.json();console.log("Upload result:",s),t(t=>t.map(t=>t.id===e?{...t,status:"completed",progress:100}:t))}else{let e=await a.json();throw console.error("Upload failed on server:",e.error),Error(e.error||"Upload failed")}}catch(s){console.error("Upload error:",s),t(t=>t.map(t=>t.id===e?{...t,status:"error",progress:0}:t))}}l(!1)},{getRootProps:n,getInputProps:o,isDragActive:d}=(0,p.uI)({onDrop:i,accept:{"application/pdf":[".pdf"],"text/plain":[".txt"],"application/msword":[".doc"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":[".docx"]},maxSize:10485760}),c=e=>{t(t=>t.filter(t=>t.id!==e))},x=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]},m=e=>{switch(e){case"uploading":return"text-blue-600";case"processing":return"text-yellow-600";case"completed":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-600"}},h=e=>{switch(e){case"uploading":return"Laster opp...";case"processing":return"Prosesserer...";case"completed":return"Ferdig";case"error":return"Feil";default:return"Ukjent"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Last opp dokumenter"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Last opp PDF-filer, Word-dokumenter eller tekstfiler for \xe5 legge dem til RAG-systemet"})]}),(0,r.jsxs)("div",{...n(),className:"\n          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors\n          ".concat(d?"border-primary-400 bg-primary-50":"border-gray-300 hover:border-gray-400","\n          ").concat(s?"opacity-50 pointer-events-none":"","\n        "),children:[(0,r.jsx)("input",{...o()}),(0,r.jsx)(g.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d?(0,r.jsx)("p",{className:"text-primary-600 font-medium",children:"Slipp filene her..."}):(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-gray-600 mb-2",children:["Dra og slipp filer her, eller ",(0,r.jsx)("span",{className:"text-primary-600 font-medium",children:"klikk for \xe5 velge"})]}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"PDF, DOC, DOCX, TXT (maks 10MB)"})]})]}),e.length>0&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"font-medium text-gray-900 mb-4",children:"Opplastede filer"}),(0,r.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,r.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),(0,r.jsx)("button",{onClick:()=>c(e.id),className:"ml-2 text-gray-400 hover:text-gray-600",children:(0,r.jsx)(y.Z,{className:"h-4 w-4"})})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-xs text-gray-500",children:x(e.size)}),(0,r.jsx)("span",{className:"text-xs font-medium ".concat(m(e.status)),children:h(e.status)})]}),"completed"!==e.status&&"error"!==e.status&&(0,r.jsx)("div",{className:"mt-2 bg-gray-200 rounded-full h-1",children:(0,r.jsx)("div",{className:"bg-primary-600 h-1 rounded-full transition-all duration-300",style:{width:"".concat(e.progress,"%")}})})]}),"completed"===e.status&&(0,r.jsx)(f.Z,{className:"h-5 w-5 text-green-500 ml-3"})]},e.id))})]}),(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Hvordan det fungerer:"}),(0,r.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,r.jsx)("li",{children:"1. Last opp din u-blox brukermanual (PDF)"}),(0,r.jsx)("li",{children:"2. Systemet ekstraherer tekst og lager vektorembeddings"}),(0,r.jsx)("li",{children:"3. G\xe5 til Chat Interface for \xe5 stille sp\xf8rsm\xe5l"}),(0,r.jsx)("li",{children:"4. RAG-systemet finner relevant informasjon fra dokumentet"})]})]})]})}function b(){let[e,t]=(0,a.useState)("chat");return(0,r.jsx)(o,{children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsx)("div",{className:"flex justify-center mb-6",children:(0,r.jsxs)("div",{className:"flex bg-gray-100 dark:bg-gray-800 rounded-xl p-1",children:[(0,r.jsx)("button",{onClick:()=>t("chat"),className:"px-6 py-2 rounded-lg font-medium transition-all duration-200 ".concat("chat"===e?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100"),children:"Chat"}),(0,r.jsx)("button",{onClick:()=>t("upload"),className:"px-6 py-2 rounded-lg font-medium transition-all duration-200 ".concat("upload"===e?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-600 dark:text-gray-300 hover:text-gray-800 dark:hover:text-gray-100"),children:"Last opp dokumenter"})]})}),(0,r.jsxs)("div",{className:"h-[calc(100vh-16rem)]",children:["chat"===e&&(0,r.jsx)(u,{}),"upload"===e&&(0,r.jsx)(j,{})]})]})})}}},function(e){e.O(0,[992,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);